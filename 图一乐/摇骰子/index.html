<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>å¤§è¯éª°</title>
  <link rel="stylesheet" href="index.css">

</head>
<body>

<div class="dice-main">
  <div class="dice-cover" id="diceCover" style="transform:translateY(-80%)"></div>

  <div class="dices" id="dices"></div>

  <div class="dice-base"></div>

</div>

<div style="display: grid;grid-template-columns: repeat(3, 1fr); gap: 10px;">
  <button class="shakeDice-button" id="openCoverB" onclick="handleCover()">å…³</button>
  <button class="shakeDice-button" onclick="shakeDice()">è®¡ç®—</button>
  <button class="shakeDice-button" id="shakeDiceB" onclick="shakeDice()">æ‘‡ğŸ²</button>
</div>


</body>

<script>
  // æå‰åŠ è½½éŸ³æ•ˆ
  const openMp3 = new Audio('./open.mp3');
  const diceMp3 = new Audio('./dice.mp3');
  let isCoverOpen = true; // éª°ç›…å¼€å…³çŠ¶æ€

  const diceCover = document.getElementById('diceCover')      // éª°ç›…
  const dices = document.getElementById('dices')              // éª°å­å®¹å™¨
  const openCoverB = document.getElementById('openCoverB')    // éª°ç›…å¼€å…³æŒ‰é’®
  const shakeDiceB = document.getElementById('shakeDiceB')    // æ‘‡éª°å­æŒ‰é’®

  shakeDice(true) // åˆå§‹åŒ–éª°å­

  /**
   * æ‘‡éª°å­é€»è¾‘
   *
   * @author ğ“’ğ“±ğ“®ğ“·ğ“–ğ“¾ğ“ªğ“·ğ“°ğ“›ğ“¸ğ“·ğ“°
   * @since 2025/9/15 2:42
   */
  function shakeDice(isInit = false) {
    let diceNumbers = Array(5).fill(0)
    if (!isInit) {
      shakeDiceB.disabled = true
      isCoverOpen = true
      handleCover()
      diceMp3.play()
      diceNumbers = diceNumbers.map(() => Math.floor(Math.random() * 6) + 1).sort()
    }

    window.setTimeout(() => {
      dices.innerHTML = '';
      diceNumbers.forEach(diceNumber => {
        const dice = document.createElement('img')
        dice.src = `./dice-svg/${diceNumber}.svg`
        dices.appendChild(dice)
        shakeDiceB.disabled = false
      })
    }, 200)

  }

  /**
   * å¤„ç†éª°ç›…å¼€å…³
   *
   * @param {boolean} isCalculate æ˜¯å¦è®¡ç®—
   * @author ğ“’ğ“±ğ“®ğ“·ğ“–ğ“¾ğ“ªğ“·ğ“°ğ“›ğ“¸ğ“·ğ“°
   * @since 2025/9/15 2:58
   */
  function handleCover(isCalculate = false) {
    if (isCoverOpen) {
      openCoverB.innerText = 'å¼€'
      diceCover.style.transform = 'translateY(0)'
    } else {
      diceCover.style.transform = 'translateY(-80%)'
      openCoverB.innerText = 'å…³'
    }
    isCoverOpen = !isCoverOpen
  }


</script>
</html>